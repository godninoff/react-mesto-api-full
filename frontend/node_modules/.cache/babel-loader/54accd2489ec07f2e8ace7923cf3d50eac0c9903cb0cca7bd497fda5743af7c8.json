{"ast":null,"code":"import{Link,useLocation,useNavigate}from\"react-router-dom\";import{useAppDispatch,useAppSelector}from\"../store/hooks\";import{signOut}from\"../store/authSlice\";import{authApi,useGetUserQuery}from\"../store/api/authApi\";import React from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var logo=require(\"../images/logo.png\");var Header=function Header(){var location=useLocation();var dispatch=useAppDispatch();var navigate=useNavigate();var token=useAppSelector(function(state){return state.auth.token;});var id=useAppSelector(function(state){return state.auth.id;});var _useGetUserQuery=useGetUserQuery(id),data=_useGetUserQuery.data,isSuccess=_useGetUserQuery.isSuccess;var handleLogout=function handleLogout(){dispatch(authApi.util.resetApiState());dispatch(signOut());navigate(\"/signin\");};React.useEffect(function(){if(!token){navigate(\"/signin\");}},[]);return/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"header__logo\",src:logo,alt:\"\\u041C\\u0435\\u0441\\u0442\\u043E\"}),location.pathname===\"/signup\"?/*#__PURE__*/_jsx(Link,{className:\"header__link\",to:\"/signin\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"}):\"\",location.pathname===\"/signin\"?/*#__PURE__*/_jsx(Link,{className:\"header__link\",to:\"/signup\",children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"}):\"\",location.pathname!==\"/signup\"&&location.pathname!==\"/signin\"?/*#__PURE__*/_jsxs(\"div\",{className:\"header__user-auth\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"header__user-email\",children:isSuccess&&data.email}),/*#__PURE__*/_jsx(Link,{className:\"header__link\",to:\"/signin\",onClick:handleLogout,children:\"\\u0412\\u044B\\u0439\\u0442\\u0438\"})]}):\"\"]});};export default Header;","map":{"version":3,"names":["Link","useLocation","useNavigate","useAppDispatch","useAppSelector","signOut","authApi","useGetUserQuery","React","jsx","_jsx","jsxs","_jsxs","logo","require","Header","location","dispatch","navigate","token","state","auth","id","_useGetUserQuery","data","isSuccess","handleLogout","util","resetApiState","useEffect","className","children","src","alt","pathname","to","email","onClick"],"sources":["C:/dev/projects/react-mesto-api-full/frontend/src/components/Header.tsx"],"sourcesContent":["import { Link, useLocation, useNavigate } from \"react-router-dom\";\r\nimport { useAppDispatch, useAppSelector } from \"../store/hooks\";\r\nimport { signOut } from \"../store/authSlice\";\r\nimport { authApi, useGetUserQuery } from \"../store/api/authApi\";\r\nimport React from \"react\";\r\n\r\nconst logo = require(\"../images/logo.png\") as string;\r\n\r\nconst Header = () => {\r\n  const location = useLocation();\r\n  const dispatch = useAppDispatch();\r\n  const navigate = useNavigate();\r\n  const token = useAppSelector((state) => state.auth.token);\r\n  const id = useAppSelector((state) => state.auth.id);\r\n\r\n  const { data, isSuccess } = useGetUserQuery(id);\r\n\r\n  const handleLogout = () => {\r\n    dispatch(authApi.util.resetApiState());\r\n    dispatch(signOut());\r\n    navigate(\"/signin\");\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (!token) {\r\n      navigate(\"/signin\");\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <img className=\"header__logo\" src={logo} alt=\"Место\" />\r\n\r\n      {location.pathname === \"/signup\" ? (\r\n        <Link className=\"header__link\" to=\"/signin\">\r\n          Войти\r\n        </Link>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n\r\n      {location.pathname === \"/signin\" ? (\r\n        <Link className=\"header__link\" to=\"/signup\">\r\n          Регистрация\r\n        </Link>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n\r\n      {location.pathname !== \"/signup\" && location.pathname !== \"/signin\" ? (\r\n        <div className=\"header__user-auth\">\r\n          <p className=\"header__user-email\">{isSuccess && data.email}</p>\r\n          <Link className=\"header__link\" to=\"/signin\" onClick={handleLogout}>\r\n            Выйти\r\n          </Link>\r\n        </div>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n    </header>\r\n  );\r\n};\r\nexport default Header;\r\n"],"mappings":"AAAA,OAASA,IAAI,CAAEC,WAAW,CAAEC,WAAW,KAAQ,kBAAkB,CACjE,OAASC,cAAc,CAAEC,cAAc,KAAQ,gBAAgB,CAC/D,OAASC,OAAO,KAAQ,oBAAoB,CAC5C,OAASC,OAAO,CAAEC,eAAe,KAAQ,sBAAsB,CAC/D,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1B,GAAM,CAAAC,IAAI,CAAGC,OAAO,CAAC,oBAAoB,CAAW,CAEpD,GAAM,CAAAC,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAA,CAAS,CACnB,GAAM,CAAAC,QAAQ,CAAGf,WAAW,EAAE,CAC9B,GAAM,CAAAgB,QAAQ,CAAGd,cAAc,EAAE,CACjC,GAAM,CAAAe,QAAQ,CAAGhB,WAAW,EAAE,CAC9B,GAAM,CAAAiB,KAAK,CAAGf,cAAc,CAAC,SAACgB,KAAK,QAAK,CAAAA,KAAK,CAACC,IAAI,CAACF,KAAK,GAAC,CACzD,GAAM,CAAAG,EAAE,CAAGlB,cAAc,CAAC,SAACgB,KAAK,QAAK,CAAAA,KAAK,CAACC,IAAI,CAACC,EAAE,GAAC,CAEnD,IAAAC,gBAAA,CAA4BhB,eAAe,CAACe,EAAE,CAAC,CAAvCE,IAAI,CAAAD,gBAAA,CAAJC,IAAI,CAAEC,SAAS,CAAAF,gBAAA,CAATE,SAAS,CAEvB,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CACzBT,QAAQ,CAACX,OAAO,CAACqB,IAAI,CAACC,aAAa,EAAE,CAAC,CACtCX,QAAQ,CAACZ,OAAO,EAAE,CAAC,CACnBa,QAAQ,CAAC,SAAS,CAAC,CACrB,CAAC,CAEDV,KAAK,CAACqB,SAAS,CAAC,UAAM,CACpB,GAAI,CAACV,KAAK,CAAE,CACVD,QAAQ,CAAC,SAAS,CAAC,CACrB,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEN,KAAA,WAAQkB,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACxBrB,IAAA,QAAKoB,SAAS,CAAC,cAAc,CAACE,GAAG,CAAEnB,IAAK,CAACoB,GAAG,CAAC,gCAAO,EAAG,CAEtDjB,QAAQ,CAACkB,QAAQ,GAAK,SAAS,cAC9BxB,IAAA,CAACV,IAAI,EAAC8B,SAAS,CAAC,cAAc,CAACK,EAAE,CAAC,SAAS,CAAAJ,QAAA,CAAC,gCAE5C,EAAO,CAEP,EACD,CAEAf,QAAQ,CAACkB,QAAQ,GAAK,SAAS,cAC9BxB,IAAA,CAACV,IAAI,EAAC8B,SAAS,CAAC,cAAc,CAACK,EAAE,CAAC,SAAS,CAAAJ,QAAA,CAAC,oEAE5C,EAAO,CAEP,EACD,CAEAf,QAAQ,CAACkB,QAAQ,GAAK,SAAS,EAAIlB,QAAQ,CAACkB,QAAQ,GAAK,SAAS,cACjEtB,KAAA,QAAKkB,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCrB,IAAA,MAAGoB,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAEN,SAAS,EAAID,IAAI,CAACY,KAAK,EAAK,cAC/D1B,IAAA,CAACV,IAAI,EAAC8B,SAAS,CAAC,cAAc,CAACK,EAAE,CAAC,SAAS,CAACE,OAAO,CAAEX,YAAa,CAAAK,QAAA,CAAC,gCAEnE,EAAO,GACH,CAEN,EACD,GACM,CAEb,CAAC,CACD,cAAe,CAAAhB,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}