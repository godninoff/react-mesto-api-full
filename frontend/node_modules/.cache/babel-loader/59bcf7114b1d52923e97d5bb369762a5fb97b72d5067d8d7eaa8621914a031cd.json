{"ast":null,"code":"import _regeneratorRuntime from\"C:/dev/projects/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/dev/projects/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/dev/projects/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import PopupWithForm from\"./PopupWithForm\";import{CurrentUserContext}from\"../contexts/CurrentUserContext\";import{useEditUserMutation}from\"../store/api/actionsApi\";import{useAppDispatch,useAppSelector}from\"../store/hooks\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditProfilePopup=function EditProfilePopup(){var currentUser=React.useContext(CurrentUserContext);var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),name=_React$useState2[0],setName=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),description=_React$useState4[0],setDescription=_React$useState4[1];var dispatch=useAppDispatch();var _useEditUserMutation=useEditUserMutation(),_useEditUserMutation2=_slicedToArray(_useEditUserMutation,1),editUser=_useEditUserMutation2[0];var userId=useAppSelector(function(state){return state.auth.userId;});// React.useEffect(() => {\n//   setName(currentUser.name);\n//   setDescription(currentUser.about);\n// }, [currentUser, props.isOpen]);\nvar handleEditUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();if(!userId){_context.next=4;break;}_context.next=4;return editUser({name:name,about:description});case 4:setName(\"\");setDescription(\"\");case 6:case\"end\":return _context.stop();}},_callee);}));return function handleEditUser(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(PopupWithForm,{name:\"popup_edit\",title:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",buttonSaveText:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\",onSubmit:handleEditUser,children:[/*#__PURE__*/_jsx(\"input\",{required:true,value:name,onChange:function onChange(e){return setName(e.target.value);},className:\"popup__input popup__input_type_name\",name:\"name\",id:\"name-input\",type:\"text\",minLength:2,maxLength:40,placeholder:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__form-error name-input-error\"}),/*#__PURE__*/_jsx(\"input\",{required:true,value:description,onChange:function onChange(e){return setDescription(e.target.value);},className:\"popup__input popup__input_type_description\",name:\"about\",id:\"description-input\",type:\"text\",minLength:2,maxLength:200,placeholder:\"\\u0412\\u0438\\u0434 \\u0434\\u0435\\u044F\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u0438\"}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__form-error description-input-error\"})]});};export default EditProfilePopup;","map":{"version":3,"names":["React","PopupWithForm","CurrentUserContext","useEditUserMutation","useAppDispatch","useAppSelector","jsx","_jsx","jsxs","_jsxs","EditProfilePopup","currentUser","useContext","_React$useState","useState","_React$useState2","_slicedToArray","name","setName","_React$useState3","_React$useState4","description","setDescription","dispatch","_useEditUserMutation","_useEditUserMutation2","editUser","userId","state","auth","handleEditUser","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","wrap","_callee$","_context","prev","next","preventDefault","about","stop","_x","apply","arguments","title","buttonSaveText","onSubmit","children","required","value","onChange","target","className","id","type","minLength","maxLength","placeholder"],"sources":["C:/dev/projects/react-mesto-api-full/frontend/src/components/EditProfilePopup.tsx"],"sourcesContent":["import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport { useEditUserMutation } from \"../store/api/actionsApi\";\r\nimport { useAppDispatch, useAppSelector } from \"../store/hooks\";\r\nimport { closeAllPopups } from \"../store/popupReducer\";\r\n\r\nconst EditProfilePopup = () => {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const [name, setName] = React.useState(\"\");\r\n  const [description, setDescription] = React.useState(\"\");\r\n  const dispatch = useAppDispatch();\r\n  const [editUser] = useEditUserMutation();\r\n  const userId = useAppSelector((state) => state.auth.userId);\r\n\r\n  // React.useEffect(() => {\r\n  //   setName(currentUser.name);\r\n  //   setDescription(currentUser.about);\r\n  // }, [currentUser, props.isOpen]);\r\n\r\n  const handleEditUser = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (userId)\r\n      await editUser({\r\n        name: name,\r\n        about: description,\r\n      });\r\n    setName(\"\");\r\n    setDescription(\"\");\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"popup_edit\"\r\n      title=\"Редактировать профиль\"\r\n      buttonSaveText=\"Сохранить\"\r\n      onSubmit={handleEditUser}\r\n    >\r\n      <input\r\n        required\r\n        value={name}\r\n        onChange={(e) => setName(e.target.value)}\r\n        className=\"popup__input popup__input_type_name\"\r\n        name=\"name\"\r\n        id=\"name-input\"\r\n        type=\"text\"\r\n        minLength={2}\r\n        maxLength={40}\r\n        placeholder=\"Имя\"\r\n      />\r\n      <span className=\"popup__form-error name-input-error\"></span>\r\n      <input\r\n        required\r\n        value={description}\r\n        onChange={(e) => setDescription(e.target.value)}\r\n        className=\"popup__input popup__input_type_description\"\r\n        name=\"about\"\r\n        id=\"description-input\"\r\n        type=\"text\"\r\n        minLength={2}\r\n        maxLength={200}\r\n        placeholder=\"Вид деятельности\"\r\n      />\r\n      <span className=\"popup__form-error description-input-error\"></span>\r\n    </PopupWithForm>\r\n  );\r\n};\r\nexport default EditProfilePopup;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}