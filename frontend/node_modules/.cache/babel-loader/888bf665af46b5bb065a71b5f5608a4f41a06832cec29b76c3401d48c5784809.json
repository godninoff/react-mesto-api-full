{"ast":null,"code":"import _regeneratorRuntime from\"C:/dev/projects/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/dev/projects/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/dev/projects/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{useSignUpMutation}from\"../store/api/authApi\";import{useDispatch}from\"react-redux\";import{getUserData}from\"../store/authSlice\";import{changePopupState,checkAuthSuccess}from\"../store/popupReducer\";import InfoTooltip from\"./InfoTooltip\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Register=function Register(){var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),email=_React$useState2[0],setEmail=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),password=_React$useState4[0],setPassword=_React$useState4[1];var navigate=useNavigate();var _useSignUpMutation=useSignUpMutation(),_useSignUpMutation2=_slicedToArray(_useSignUpMutation,2),signUp=_useSignUpMutation2[0],_useSignUpMutation2$=_useSignUpMutation2[1],data=_useSignUpMutation2$.data,isSuccess=_useSignUpMutation2$.isSuccess;var dispatch=useDispatch();var handleRegister=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(email&&password)){_context.next=5;break;}_context.next=4;return signUp({email:email,password:password});case 4:dispatch(changePopupState());case 5:console.error(\"error\");case 6:case\"end\":return _context.stop();}},_callee);}));return function handleRegister(_x){return _ref.apply(this,arguments);};}();React.useEffect(function(){if(isSuccess){dispatch(getUserData({token:data.accessToken,userId:data.user.id,id:data.user.id}));}dispatch(checkAuthSuccess(isSuccess));},[isSuccess]);return/*#__PURE__*/_jsxs(\"section\",{className:\"sign-up\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"login__title\",children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"sign__form\",name:\"sign-up\",onSubmit:handleRegister,children:[/*#__PURE__*/_jsx(\"input\",{className:\"sign__input\",type:\"email\",placeholder:\"Email\",name:\"email\",onChange:function onChange(e){return setEmail(e.target.value);},value:email,required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"form__input-error\"}),/*#__PURE__*/_jsx(\"input\",{className:\"sign__input\",type:\"password\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",name:\"password\",onChange:function onChange(e){return setPassword(e.target.value);},value:password,required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"form__input-error\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sign__enter-button\",type:\"submit\",name:\"submit\",children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"}),/*#__PURE__*/_jsx(\"p\",{className:\"sign__form-bottom-text\",children:/*#__PURE__*/_jsx(Link,{to:\"/signin\",className:\"sign__form-bottom-link header__link\",children:\"\\u0423\\u0436\\u0435 \\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u044B? \\u0412\\u043E\\u0439\\u0442\\u0438\"})})]}),/*#__PURE__*/_jsx(InfoTooltip,{})]});};export default Register;","map":{"version":3,"names":["React","Link","useNavigate","useSignUpMutation","useDispatch","getUserData","changePopupState","checkAuthSuccess","InfoTooltip","jsx","_jsx","jsxs","_jsxs","Register","_React$useState","useState","_React$useState2","_slicedToArray","email","setEmail","_React$useState3","_React$useState4","password","setPassword","navigate","_useSignUpMutation","_useSignUpMutation2","signUp","_useSignUpMutation2$","data","isSuccess","dispatch","handleRegister","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","wrap","_callee$","_context","prev","next","preventDefault","console","error","stop","_x","apply","arguments","useEffect","token","accessToken","userId","user","id","className","children","name","onSubmit","type","placeholder","onChange","target","value","required","to"],"sources":["C:/dev/projects/react-mesto-api-full/frontend/src/components/Register.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useSignUpMutation } from \"../store/api/authApi\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { getUserData } from \"../store/authSlice\";\r\nimport { changePopupState, checkAuthSuccess } from \"../store/popupReducer\";\r\nimport InfoTooltip from \"./InfoTooltip\";\r\n\r\nconst Register = () => {\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [password, setPassword] = React.useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  const [signUp, { data, isSuccess }] = useSignUpMutation();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const handleRegister = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (email && password) {\r\n      await signUp({ email, password });\r\n      dispatch(changePopupState());\r\n    }\r\n    console.error(\"error\");\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (isSuccess) {\r\n      dispatch(\r\n        getUserData({\r\n          token: data.accessToken,\r\n          userId: data.user.id,\r\n          id: data.user.id,\r\n        })\r\n      );\r\n    }\r\n    dispatch(checkAuthSuccess(isSuccess));\r\n  }, [isSuccess]);\r\n\r\n  return (\r\n    <section className=\"sign-up\">\r\n      <h2 className=\"login__title\">Регистрация</h2>\r\n      <form className=\"sign__form\" name=\"sign-up\" onSubmit={handleRegister}>\r\n        <input\r\n          className=\"sign__input\"\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          name=\"email\"\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          value={email}\r\n          required\r\n        />\r\n        <span className=\"form__input-error\"></span>\r\n        <input\r\n          className=\"sign__input\"\r\n          type=\"password\"\r\n          placeholder=\"Пароль\"\r\n          name=\"password\"\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          value={password}\r\n          required\r\n        />\r\n        <span className=\"form__input-error\"></span>\r\n        <button className=\"sign__enter-button\" type=\"submit\" name=\"submit\">\r\n          Зарегистрироваться\r\n        </button>\r\n        <p className=\"sign__form-bottom-text\">\r\n          <Link to=\"/signin\" className=\"sign__form-bottom-link header__link\">\r\n            Уже зарегистрированы? Войти\r\n          </Link>\r\n        </p>\r\n      </form>\r\n      <InfoTooltip />\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n"],"mappings":"yZAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,OAASC,iBAAiB,KAAQ,sBAAsB,CACxD,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,WAAW,KAAQ,oBAAoB,CAChD,OAASC,gBAAgB,CAAEC,gBAAgB,KAAQ,uBAAuB,CAC1E,MAAO,CAAAC,WAAW,KAAM,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAExC,GAAM,CAAAC,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAA,CAAS,CACrB,IAAAC,eAAA,CAA0Bd,KAAK,CAACe,QAAQ,CAAC,EAAE,CAAC,CAAAC,gBAAA,CAAAC,cAAA,CAAAH,eAAA,IAArCI,KAAK,CAAAF,gBAAA,IAAEG,QAAQ,CAAAH,gBAAA,IACtB,IAAAI,gBAAA,CAAgCpB,KAAK,CAACe,QAAQ,CAAC,EAAE,CAAC,CAAAM,gBAAA,CAAAJ,cAAA,CAAAG,gBAAA,IAA3CE,QAAQ,CAAAD,gBAAA,IAAEE,WAAW,CAAAF,gBAAA,IAC5B,GAAM,CAAAG,QAAQ,CAAGtB,WAAW,EAAE,CAE9B,IAAAuB,kBAAA,CAAsCtB,iBAAiB,EAAE,CAAAuB,mBAAA,CAAAT,cAAA,CAAAQ,kBAAA,IAAlDE,MAAM,CAAAD,mBAAA,IAAAE,oBAAA,CAAAF,mBAAA,IAAIG,IAAI,CAAAD,oBAAA,CAAJC,IAAI,CAAEC,SAAS,CAAAF,oBAAA,CAATE,SAAS,CAEhC,GAAM,CAAAC,QAAQ,CAAG3B,WAAW,EAAE,CAE9B,GAAM,CAAA4B,cAAc,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,CAAkB,SAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAC9CL,CAAC,CAACM,cAAc,EAAE,CAAC,KACf1B,KAAK,EAAII,QAAQ,GAAAmB,QAAA,CAAAE,IAAA,UAAAF,QAAA,CAAAE,IAAA,SACb,CAAAhB,MAAM,CAAC,CAAET,KAAK,CAALA,KAAK,CAAEI,QAAQ,CAARA,QAAS,CAAC,CAAC,QACjCS,QAAQ,CAACzB,gBAAgB,EAAE,CAAC,CAAC,OAE/BuC,OAAO,CAACC,KAAK,CAAC,OAAO,CAAC,CAAC,wBAAAL,QAAA,CAAAM,IAAA,MAAAV,OAAA,GACxB,kBAPK,CAAAL,cAAcA,CAAAgB,EAAA,SAAAf,IAAA,CAAAgB,KAAA,MAAAC,SAAA,OAOnB,CAEDlD,KAAK,CAACmD,SAAS,CAAC,UAAM,CACpB,GAAIrB,SAAS,CAAE,CACbC,QAAQ,CACN1B,WAAW,CAAC,CACV+C,KAAK,CAAEvB,IAAI,CAACwB,WAAW,CACvBC,MAAM,CAAEzB,IAAI,CAAC0B,IAAI,CAACC,EAAE,CACpBA,EAAE,CAAE3B,IAAI,CAAC0B,IAAI,CAACC,EAChB,CAAC,CAAC,CACH,CACH,CACAzB,QAAQ,CAACxB,gBAAgB,CAACuB,SAAS,CAAC,CAAC,CACvC,CAAC,CAAE,CAACA,SAAS,CAAC,CAAC,CAEf,mBACElB,KAAA,YAAS6C,SAAS,CAAC,SAAS,CAAAC,QAAA,eAC1BhD,IAAA,OAAI+C,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,oEAAW,EAAK,cAC7C9C,KAAA,SAAM6C,SAAS,CAAC,YAAY,CAACE,IAAI,CAAC,SAAS,CAACC,QAAQ,CAAE5B,cAAe,CAAA0B,QAAA,eACnEhD,IAAA,UACE+C,SAAS,CAAC,aAAa,CACvBI,IAAI,CAAC,OAAO,CACZC,WAAW,CAAC,OAAO,CACnBH,IAAI,CAAC,OAAO,CACZI,QAAQ,CAAE,SAAAA,SAACzB,CAAC,QAAK,CAAAnB,QAAQ,CAACmB,CAAC,CAAC0B,MAAM,CAACC,KAAK,CAAC,EAAC,CAC1CA,KAAK,CAAE/C,KAAM,CACbgD,QAAQ,OACR,cACFxD,IAAA,SAAM+C,SAAS,CAAC,mBAAmB,EAAQ,cAC3C/C,IAAA,UACE+C,SAAS,CAAC,aAAa,CACvBI,IAAI,CAAC,UAAU,CACfC,WAAW,CAAC,sCAAQ,CACpBH,IAAI,CAAC,UAAU,CACfI,QAAQ,CAAE,SAAAA,SAACzB,CAAC,QAAK,CAAAf,WAAW,CAACe,CAAC,CAAC0B,MAAM,CAACC,KAAK,CAAC,EAAC,CAC7CA,KAAK,CAAE3C,QAAS,CAChB4C,QAAQ,OACR,cACFxD,IAAA,SAAM+C,SAAS,CAAC,mBAAmB,EAAQ,cAC3C/C,IAAA,WAAQ+C,SAAS,CAAC,oBAAoB,CAACI,IAAI,CAAC,QAAQ,CAACF,IAAI,CAAC,QAAQ,CAAAD,QAAA,CAAC,8GAEnE,EAAS,cACThD,IAAA,MAAG+C,SAAS,CAAC,wBAAwB,CAAAC,QAAA,cACnChD,IAAA,CAACT,IAAI,EAACkE,EAAE,CAAC,SAAS,CAACV,SAAS,CAAC,qCAAqC,CAAAC,QAAA,CAAC,qJAEnE,EAAO,EACL,GACC,cACPhD,IAAA,CAACF,WAAW,IAAG,GACP,CAEd,CAAC,CAED,cAAe,CAAAK,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}